"use strict";(self.webpackChunkmonster=self.webpackChunkmonster||[]).push([[465],{7465:(it,_,l)=>{l.r(_),l.d(_,{PostbackRoutes:()=>at});var d=l(177),c=l(9417),j=l(5558),G=l(7673),$=l(1555),t=l(3953),v=l(5794),m=l(4550),U=l(1626),h=l(8701);let g=(()=>{class s{constructor(e,o){this.http=e,this.Authentication=o,this.domain="",this.domain=this.Authentication.getSubDomain()}createPostback(e,o){return this.http.post(`${this.domain}/api/postback/create/${e}`,o)}allPostback(){return this.http.get(`${this.domain}/api/postback/show`)}showPostback(e){return this.http.get(`${this.domain}/api/postback/show/${e}`)}deletePostback(e){return this.http.delete(`${this.domain}/api/postback/delete/${e}`)}updatePostback(e,o){return this.http.put(`${this.domain}/api/postback/update/${e}`,o)}getPostbackId(e){return this.http.get(`${this.domain}/api/postback/status/${e}`)}getHoldPostback(e){return this.http.get(`${this.domain}/api/hold/postback/data/${e}`)}getAllHoldPostback(e){return this.http.get(`${this.domain}/api/hold/postback/${e}`)}saveHoldPostback(e){return this.http.post(`${this.domain}/api/save/hold/postback`,e)}updateHoldPostback(e,o){return this.http.post(`${this.domain}/api/update/hold/postback/${e}`,o)}deleteHoldPostback(e){return this.http.delete(`${this.domain}/api/hold/postback/${e}`)}static#t=this.\u0275fac=function(o){return new(o||s)(t.KVO(U.Qq),t.KVO(h.k))};static#e=this.\u0275prov=t.jDH({token:s,factory:s.\u0275fac,providedIn:"root"})}return s})();const p=s=>({"is-invalid":s});function y(s,a){1&s&&(t.j41(0,"div"),t.EFF(1,"Postback Url is required"),t.k0s())}function T(s,a){1&s&&(t.j41(0,"div"),t.EFF(1," Not a valid url"),t.k0s())}function S(s,a){if(1&s&&(t.j41(0,"div",12),t.DNE(1,y,2,0,"div",13)(2,T,2,0,"div",13),t.k0s()),2&s){const e=t.XpG();t.R7$(),t.Y8G("ngIf",e.f.postbackUrl.errors&&e.f.postbackUrl.errors.required),t.R7$(),t.Y8G("ngIf",e.f.postbackUrl.errors&&e.f.postbackUrl.errors.invalidUrl&&!e.f.postbackUrl.errors.required)}}function A(s,a){1&s&&(t.j41(0,"div"),t.EFF(1," name is required"),t.k0s())}function I(s,a){if(1&s&&(t.j41(0,"div",12),t.DNE(1,A,2,0,"div",13),t.k0s()),2&s){const e=t.XpG().index,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.f.parameter.controls[e].controls.name.errors.required)}}function R(s,a){if(1&s&&(t.j41(0,"option",28),t.EFF(1),t.k0s()),2&s){const e=a.$implicit;t.FS9("value",e.value),t.R7$(),t.SpI(" ",e.value,"")}}function D(s,a){1&s&&(t.j41(0,"div"),t.EFF(1," value is required"),t.k0s())}function N(s,a){if(1&s&&(t.j41(0,"div",12),t.DNE(1,D,2,0,"div",13),t.k0s()),2&s){const e=t.XpG().index,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.f.parameter[e].value.errors.required)}}function L(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",17)(1,"div",18)(2,"div",2)(3,"div",19)(4,"div",5)(5,"label",20),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",21),t.DNE(8,I,2,1,"div",8),t.k0s()(),t.j41(9,"div",19)(10,"div",5)(11,"label",20),t.EFF(12,"Value"),t.k0s(),t.j41(13,"select",22),t.bIt("change",function(r){const i=t.eBV(e).index,n=t.XpG(2);return t.Njj(n.selectedParameters(i,r.target))}),t.j41(14,"option",23),t.EFF(15,"Select Parameter"),t.k0s(),t.DNE(16,R,2,2,"option",24),t.nI1(17,"keyvalue"),t.k0s(),t.DNE(18,N,2,1,"div",8),t.k0s()(),t.j41(19,"div",25)(20,"button",26),t.bIt("click",function(){const r=t.eBV(e).index,i=t.XpG(2);return t.Njj(i.deleteButtonClick(r))}),t.nrm(21,"span",27),t.EFF(22," Trash "),t.k0s()()(),t.nrm(23,"br"),t.k0s()()}if(2&s){const e=a.index,o=t.XpG(2);t.R7$(),t.Y8G("formGroupName",e),t.R7$(6),t.Y8G("ngClass",t.eq3(8,p,o.submitted&&o.f.parameter.controls[e].controls.name.errors)),t.R7$(),t.Y8G("ngIf",o.submitted&&o.f.parameter.controls[e].controls.name.errors),t.R7$(5),t.Y8G("ngClass",t.eq3(10,p,o.submitted&&o.f.parameter[e].value.errors)),t.R7$(3),t.Y8G("ngForOf",t.bMT(17,6,o.macroList)),t.R7$(2),t.Y8G("ngIf",o.submitted&&o.f.parameter[e].value.errors)}}function O(s,a){if(1&s&&(t.j41(0,"div",14)(1,"label",15),t.EFF(2,"Parameters"),t.k0s(),t.j41(3,"div",3),t.DNE(4,L,24,12,"div",16),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.postbackForm.get("parameter").controls)}}function X(s,a){1&s&&(t.j41(0,"div"),t.EFF(1," name is required"),t.k0s())}function Y(s,a){if(1&s&&(t.j41(0,"div",12),t.DNE(1,X,2,0,"div",13),t.k0s()),2&s){const e=t.XpG().index,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.f.customParameter.controls[e].controls.name.errors.required)}}function M(s,a){1&s&&(t.j41(0,"div"),t.EFF(1," value is required"),t.k0s())}function V(s,a){if(1&s&&(t.j41(0,"div",12),t.DNE(1,M,2,0,"div",13),t.k0s()),2&s){const e=t.XpG().index,o=t.XpG(2);t.R7$(),t.Y8G("ngIf",o.f.customParameter.controls[e].controls.value.errors.required)}}function B(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",31)(1,"div",18)(2,"div",2)(3,"div",19)(4,"div",5)(5,"label",20),t.EFF(6,"Name"),t.k0s(),t.nrm(7,"input",21),t.DNE(8,Y,2,1,"div",8),t.k0s()(),t.j41(9,"div",19)(10,"div",5)(11,"label",20),t.EFF(12,"Value"),t.k0s(),t.j41(13,"input",32),t.bIt("change",function(r){const i=t.eBV(e).index,n=t.XpG(2);return t.Njj(n.selectedParameters(i,r.target))}),t.k0s(),t.DNE(14,V,2,1,"div",8),t.k0s()(),t.j41(15,"div",25)(16,"button",26),t.bIt("click",function(){const r=t.eBV(e).index,i=t.XpG(2);return t.Njj(i.deleteCustomButtonClick(r))}),t.nrm(17,"span",27),t.EFF(18," Trash "),t.k0s()()(),t.nrm(19,"br"),t.k0s()()}if(2&s){const e=a.index,o=t.XpG(2);t.R7$(),t.Y8G("formGroupName",e),t.R7$(6),t.Y8G("ngClass",t.eq3(5,p,o.submitted&&o.f.customParameter.controls[e].controls.name.errors)),t.R7$(),t.Y8G("ngIf",o.submitted&&o.f.customParameter.controls[e].controls.name.errors),t.R7$(5),t.Y8G("ngClass",t.eq3(7,p,o.submitted&&o.f.customParameter.controls[e].controls.value.errors)),t.R7$(),t.Y8G("ngIf",o.submitted&&o.f.customParameter.controls[e].controls.value.errors)}}function q(s,a){if(1&s&&(t.j41(0,"div",14)(1,"label",29),t.EFF(2,"Custom Parameters"),t.k0s(),t.j41(3,"div",3),t.DNE(4,B,20,9,"div",30),t.k0s()()),2&s){const e=t.XpG();t.R7$(4),t.Y8G("ngForOf",e.postbackForm.get("customParameter").controls)}}let P=(()=>{class s{constructor(e,o,r,i,n,u){this.toastrService=e,this.formBuilder=o,this.route=r,this.changerouter=i,this.PostbackService=n,this.authService=u,this.macroList=[],this.selectedParams=[],this.customselectedParams=[],this.submitted=!1,this.holdPostbackId=!1,this.htmlForParameters=!1,this.htmlForCustomParameters=!1,this.pid=this.route.snapshot.paramMap.get("id"),this.pid||(this.pid=this.authService.getUserDetails.userDetail.pid),this.postbackId=this.route.snapshot.paramMap.get("postback_id")}get f(){return this.postbackForm.controls}ngOnInit(){this.macroList=Object.keys($.Macro),this.postbackForm=this.formBuilder.group({postbackUrl:["",[c.k0.required]],parameter:this.formBuilder.array([]),customParameter:this.formBuilder.array([])}),this.postbackId&&(this.resetFormData(),this.PostbackService.showPostback(this.postbackId).pipe((0,j.n)(e=>!e||e.err?this.PostbackService.getHoldPostback(this.postbackId):(0,G.of)(e))).subscribe(e=>{if(e.payload&&e.payload.length){this.htmlForParameters=!0,this.htmlForCustomParameters=!0;const o=`${e.payload[0].endpoint}?${e.payload[0].parm}`;this.postbackForm.controls.postbackUrl.setValue(o),this.parseAndFillParameters(o)}else this.toastrService.error("Postback not found!")},e=>{this.toastrService.error(e.msg)}))}selectedParameters(e,o){const r=o.target.value;this.selectedParams.includes(r)?(this.postbackForm.get("parameter").removeAt(e),this.selectedParams.splice(e,1)):this.selectedParams[e]=r?r.trim():"",this.formatePostbackUrl()}selectedCustomParameters(e,o){this.customselectedParams.includes(o)?(this.postbackForm.get("customParameter").removeAt(e),this.customselectedParams.splice(e,1)):this.customselectedParams[e]=o.trim(),this.formatePostbackUrl()}addOtherSkillFormGroup(){return this.formBuilder.group({name:["",c.k0.required],value:["",c.k0.required]})}addButtonClick(){this.postbackForm&&this.postbackForm.controls.postbackUrl.value?this.validateEnterdPostbackUrl(this.postbackForm.controls.postbackUrl.value)?(this.htmlForParameters=!0,this.postbackForm.get("parameter").push(this.addOtherSkillFormGroup())):this.toastrService.info("Enter valid postback URL","Error!"):this.toastrService.info("Postback URL can't be blank","Error!")}addCustomButtonClick(){this.postbackForm.controls.postbackUrl.value?this.validateEnterdPostbackUrl(this.postbackForm.controls.postbackUrl.value)?(this.htmlForCustomParameters=!0,this.postbackForm.get("customParameter").push(this.addOtherSkillFormGroup())):this.toastrService.info("Enter valid postback url","Error!"):this.toastrService.info("Postback url can't be blank","Error!")}deleteButtonClick(e){this.selectedParams.splice(e,1),this.postbackForm.get("parameter").removeAt(e),this.formatePostbackUrl(),0==this.selectedParams.length&&(this.htmlForParameters=!1)}deleteCustomButtonClick(e){this.customselectedParams.splice(e,1),this.postbackForm.get("customParameter").removeAt(e),this.formatePostbackUrl()}onSubmit(){if(this.submitted=!0,!this.postbackForm.value.postbackUrl)return void this.toastrService.info("Postback url can't be blank","Error!");if(!this.validateEnterdPostbackUrl(this.postbackForm.value.postbackUrl))return void this.toastrService.info("Not a valid postback url","Error!");if(!this.htmlForCustomParameters||!this.htmlForParameters)return void this.toastrService.info("Add atleast one parameters or custom parameters","Error!");if(this.postbackForm.invalid)return void this.toastrService.info("Recheck your form data, Something missing","Error!");let i,e=JSON.stringify(this.postbackForm.value.parameter),o=JSON.stringify(this.postbackForm.value.customParameter),r={publisher_id:this.pid,postbackurl:this.postbackForm.value.postbackUrl,parameter:e,customParameter:o};this.postbackForm.value.postbackUrl.includes("?")&&(r={publisher_id:this.pid,postbackurl:this.postbackForm.value.postbackUrl.split("?")[0],parameter:e,customParameter:o}),i=this.holdPostbackId?this.PostbackService.updateHoldPostback(this.postbackId,r):this.PostbackService.saveHoldPostback(r),i.subscribe(n=>{this.submitted=!1,n.err?this.toastrService.info(n.msg):this.changerouter.navigate(["/postback/list"])},n=>this.toastrService.error(n.msg,"Error!"))}validateEnterdPostbackUrl(e){return!(!e.includes("http://")&&!e.includes("https://")||!e.includes("?")||2!=e.split("?").length)}resetFormData(){this.postbackForm.get("parameter").clear(),this.postbackForm.get("customParameter").clear()}onChangePostbackUrl(e){this.htmlForParameters=!1,this.htmlForCustomParameters=!1,this.validateEnterdPostbackUrl(e.target.value)&&e.target.value.includes("?")&&(this.htmlForParameters=!0,this.htmlForCustomParameters=!0,this.resetFormData(),this.parseAndFillParameters(e.target.value))}parseAndFillParameters(e){if(this.validateEnterdPostbackUrl(e)){let i=new URL(e).search,n=[];if(i){n=i.split("?")[1].split("&");for(let u of n){let b=this.validateAndParseMacros(u);if(b.isValid)if("parameter"==b.type){const f=this.formBuilder.group(b.data);this.postbackForm.get("parameter").push(f)}else if("customParameter"==b.type){const f=this.formBuilder.group(b.data);this.postbackForm.get("customParameter").push(f)}}}}else this.toastrService.info("Enter Proper Postback URL","Error!")}formatePostbackUrl(){let e=this.postbackForm.controls.postbackUrl.value;e.includes("?")?e=e.split("?")[0]+"?":e+="?",this.postbackForm.value.parameter.forEach(o=>{e+=o.name+"={"+o.value+"}&"}),this.postbackForm.value.customParameter.forEach(o=>{e+=o.name+"="+o.value+"&"}),this.postbackForm.controls.postbackUrl.setValue(e.slice(0,-1))}validateAndParseMacros(e){let o={isValid:!1,data:{},type:""};if(e.includes("={")&&e.includes("}")){let r=e.split("={");if(2==r.length){let i=r[1].replace("}","");this.selectedParams.push(i),o.isValid=!0,o.type="parameter",o.data={name:r[0],value:i}}}else if(e.includes("=")){let r=e.split("=");2==r.length&&(this.customselectedParams.push(r[1]),o.isValid=!0,o.type="customParameter",o.data={name:r[0],value:r[1]})}return o}static#t=this.\u0275fac=function(o){return new(o||s)(t.rXU(v.tw),t.rXU(c.ok),t.rXU(m.nX),t.rXU(m.Ix),t.rXU(g),t.rXU(h.k))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-postback-add"]],standalone:!0,features:[t.aNF],decls:24,vars:8,consts:[[1,"postback-wrapper"],["action","",3,"ngSubmit","formGroup"],[1,"row"],[1,"col-md-12"],["type","button",1,"btn","btn-extra",3,"click"],[1,"form-group"],["for","postbackUrl",1,"required"],["type","text","formControlName","postbackUrl","id","postbackUrl","placeholder","Postback Url",1,"form-control",3,"change","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","row attributes",4,"ngIf"],[1,"text-center"],["type","submit",1,"btn","btn-info","m-1",2,"margin","0 5px","font-size","13px"],[1,"invalid-feedback"],[4,"ngIf"],[1,"row","attributes"],["for","",1,"attribute-heading"],["formArrayName","parameter","class","form-group",4,"ngFor","ngForOf"],["formArrayName","parameter",1,"form-group"],[3,"formGroupName"],[1,"col-md-5"],["for","value",1,"required"],["type","text","id","name","placeholder","Attribute name","formControlName","name",1,"form-control",3,"ngClass"],["id","value","formControlName","value",1,"form-control",3,"change","ngClass"],["selected","","value",""],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-2"],["type","button",1,"btn","btn-danger","btn-sm","attribute-delete",3,"click"],[1,"fa","fa-trash"],[3,"value"],[1,"attribute-heading"],["formArrayName","customParameter","class","form-group",4,"ngFor","ngForOf"],["formArrayName","customParameter",1,"form-group"],["type","text","id","name","placeholder","Attribute name","formControlName","value",1,"form-control",3,"change","ngClass"]],template:function(o,r){1&o&&(t.j41(0,"div",0)(1,"form",1),t.bIt("ngSubmit",function(){return r.onSubmit()}),t.j41(2,"div",2)(3,"div",3)(4,"button",4),t.bIt("click",function(){return r.addCustomButtonClick()}),t.j41(5,"span"),t.EFF(6,"+"),t.k0s(),t.EFF(7," Add Custom Parameters "),t.k0s(),t.j41(8,"button",4),t.bIt("click",function(){return r.addButtonClick()}),t.j41(9,"span"),t.EFF(10,"+"),t.k0s(),t.EFF(11," Add Parameters "),t.k0s()()(),t.j41(12,"div",2)(13,"div",3)(14,"div",5)(15,"label",6),t.EFF(16,"Postback Url"),t.k0s(),t.j41(17,"input",7),t.bIt("change",function(n){return r.onChangePostbackUrl(n)}),t.k0s(),t.DNE(18,S,3,2,"div",8),t.k0s()()(),t.DNE(19,O,5,1,"div",9)(20,q,5,1,"div",9),t.j41(21,"div",10)(22,"button",11),t.EFF(23),t.k0s()()()()),2&o&&(t.R7$(),t.Y8G("formGroup",r.postbackForm),t.R7$(16),t.Y8G("ngClass",t.eq3(6,p,r.submitted&&r.f.postbackUrl.errors)),t.R7$(),t.Y8G("ngIf",r.submitted&&r.f.postbackUrl.errors),t.R7$(),t.Y8G("ngIf",r.htmlForParameters),t.R7$(),t.Y8G("ngIf",r.htmlForCustomParameters),t.R7$(3),t.JRh(r.postbackId?"Update":"Submit"))},dependencies:[d.MD,d.YU,d.Sq,d.bT,d.lG,c.X1,c.qT,c.xH,c.y7,c.me,c.wz,c.BC,c.cb,c.j4,c.JD,c.$R,c.v8],styles:[".postback-wrapper[_ngcontent-%COMP%]{padding:20px;border:1px solid grey;border-radius:6px;background:#fff}.attributes[_ngcontent-%COMP%]{border:1px solid grey;margin-top:15px;border-radius:6px}.attribute-add[_ngcontent-%COMP%]{position:absolute;right:10px;top:-25px;z-index:1}.attribute-delete[_ngcontent-%COMP%]{position:relative;top:23px;border-radius:4px}.attribute-heading[_ngcontent-%COMP%]{position:relative;width:-moz-fit-content;width:fit-content;top:-12px;margin-left:11px;padding:0 10px;background-color:#fff}.name[_ngcontent-%COMP%]{font-size:15px;font-weight:700;margin-left:40%;margin-top:10px;margin-bottom:10px}.btn-extra[_ngcontent-%COMP%]{float:right;font-size:13px;background-color:linen;padding:0 5px}"]})}return s})();var F=l(2341),C=l(8451),H=l(2438);const k=()=>["aff.edit.postback"],E=s=>["/postback/edit/",s],x=s=>({name:s});function w(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",4)(1,"button",5),t.bIt("click",function(){t.eBV(e);const r=t.XpG();return t.Njj(r.addPostback())}),t.EFF(2," Add Postback "),t.k0s()()}}function J(s,a){1&s&&(t.j41(0,"th"),t.EFF(1,"Action"),t.k0s())}function z(s,a){if(1&s&&(t.qex(0),t.DNE(1,J,2,0,"th",13),t.bVm()),2&s){const e=t.XpG(2);t.R7$(),t.Y8G("ngIf",!e.holdPostbackList.length)}}function W(s,a){if(1&s&&(t.j41(0,"td")(1,"button",14),t.nrm(2,"i",15),t.EFF(3," Edit "),t.k0s()()),2&s){const e=t.XpG(2).$implicit;t.R7$(),t.Y8G("routerLink",t.eq3(2,E,e._id))("queryParams",t.eq3(4,x,e.publisher_name))}}function K(s,a){if(1&s&&(t.qex(0),t.DNE(1,W,4,6,"td",13),t.bVm()),2&s){const e=t.XpG(3);t.R7$(),t.Y8G("ngIf",!e.holdPostbackList.length)}}function Q(s,a){if(1&s&&(t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"shorten4"),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.DNE(8,K,2,1,"ng-container",11),t.k0s()),2&s){const e=a.$implicit;t.R7$(2),t.JRh(t.bMT(3,4,e.endpoint+"?"+e.parm)),t.R7$(3),t.JRh(e.token),t.R7$(2),t.JRh(1==e.status?"Active":"Inactive"),t.R7$(),t.Y8G("ngxPermissionsOnly",t.lJ4(6,k))}}function Z(s,a){if(1&s&&(t.j41(0,"div",6)(1,"div",7)(2,"h5",8),t.EFF(3,"CURRENT POSTBACK"),t.k0s()(),t.j41(4,"div",9)(5,"table",10)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"Postback Url"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Token"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Status"),t.k0s(),t.DNE(14,z,2,1,"ng-container",11),t.k0s()(),t.j41(15,"tbody"),t.DNE(16,Q,9,7,"tr",12),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(14),t.Y8G("ngxPermissionsOnly",t.lJ4(2,k)),t.R7$(2),t.Y8G("ngForOf",e.postbackList)}}function tt(s,a){if(1&s&&(t.j41(0,"button",14),t.nrm(1,"i",15),t.EFF(2," Edit "),t.k0s()),2&s){const e=t.XpG().$implicit;t.Y8G("routerLink",t.eq3(2,E,e._id))("queryParams",t.eq3(4,x,e.publisher_name))}}function et(s,a){if(1&s){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.nI1(3,"shorten"),t.k0s(),t.j41(4,"td"),t.EFF(5),t.k0s(),t.j41(6,"td"),t.EFF(7),t.k0s(),t.j41(8,"td"),t.DNE(9,tt,3,6,"button",17),t.j41(10,"button",18),t.bIt("click",function(){const r=t.eBV(e).$implicit,i=t.XpG(2),n=t.sdS(5);return t.Njj(i.onDeleteHoldPostback(r._id,n))}),t.nrm(11,"i",19),t.EFF(12," Delete "),t.k0s()()()}if(2&s){const e=a.$implicit;t.R7$(2),t.JRh(t.bMT(3,4,e.endpoint+"?"+e.parm)),t.R7$(3),t.JRh(e.token),t.R7$(2),t.JRh(1==e.status?"Active":"Inactive"),t.R7$(2),t.Y8G("ngxPermissionsOnly",t.lJ4(6,k))}}function st(s,a){if(1&s&&(t.j41(0,"div",6)(1,"div",7)(2,"h5",8),t.EFF(3,"HOLD POSTBACK"),t.k0s()(),t.j41(4,"div",16)(5,"table",10)(6,"thead")(7,"tr")(8,"th"),t.EFF(9,"Postback Url"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Token"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Status"),t.k0s(),t.j41(14,"th"),t.EFF(15,"Action"),t.k0s()()(),t.j41(16,"tbody"),t.DNE(17,et,13,7,"tr",12),t.k0s()()()()),2&s){const e=t.XpG();t.R7$(17),t.Y8G("ngForOf",e.holdPostbackList)}}function ot(s,a){if(1&s){const e=t.RV6();t.j41(0,"button",31),t.bIt("click",function(){t.eBV(e);const r=t.XpG().$implicit;return t.Njj(r.close("true"))}),t.EFF(1,"Delete"),t.k0s()}}function rt(s,a){if(1&s){const e=t.RV6();t.j41(0,"div",20)(1,"h4",21),t.EFF(2,"Delete Hold Postback"),t.k0s()(),t.j41(3,"div",22)(4,"div",23)(5,"p",24),t.EFF(6,"Type "),t.j41(7,"strong"),t.EFF(8,"DELETE"),t.k0s(),t.EFF(9," in uppercase to delete hold postback."),t.k0s(),t.j41(10,"p",24)(11,"strong",25),t.EFF(12,"*Warning: This action can't be undone."),t.k0s()()(),t.j41(13,"div",26)(14,"input",27),t.mxI("ngModelChange",function(r){t.eBV(e);const i=t.XpG();return t.DH7(i.deleteText,r)||(i.deleteText=r),t.Njj(r)}),t.k0s()()(),t.j41(15,"div",28),t.DNE(16,ot,2,0,"button",29),t.j41(17,"button",30),t.bIt("click",function(){const r=t.eBV(e).$implicit;return t.Njj(r.close("false"))}),t.EFF(18,"Cancel"),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(14),t.R50("ngModel",e.deleteText),t.R7$(2),t.Y8G("ngIf","DELETE"==e.deleteText)}}const at=[{path:"",children:[{path:"add/:id",component:P,data:{title:"Add Postback",url:[{title:"Dashboard",url:"/"},{title:"Add Postback"}]}},{path:"edit/:postback_id",component:P,data:{title:"Edit Postback",url:[{title:"Dashboard",url:"/"},{title:"Edit Postback"}]}},{path:"list",component:(()=>{class s{constructor(e,o,r,i,n){this.authService=e,this.PostbackService=o,this.router=r,this.toastrService=i,this.modelService=n,this.postbackList=[],this.holdPostbackList=[],this.deleteText="",this.userData=this.authService.getUserDetails.userDetail}ngOnInit(){this.postbackList=[],this.holdPostbackList=[],this.userData.pid?(this.PostbackService.getPostbackId(this.userData.pid).subscribe(e=>this.postbackList=e&&e.payload&&e.payload.length?e.payload:[],e=>this.toastrService.error(e.msg)),this.PostbackService.getAllHoldPostback(this.userData.pid).subscribe(e=>this.holdPostbackList=e&&e.payload&&e.payload.length?e.payload:[],e=>this.toastrService.error(e.msg))):(this.toastrService.error("Login again!"),this.router.navigate(["/login"]))}onDeleteHoldPostback(e,o){this.modelService.open(o,{ariaLabelledBy:"modal-basic-title",backdrop:"static",keyboard:!0,size:"lg"}).result.then(i=>{"true"==i&&this.PostbackService.deleteHoldPostback(e).subscribe(n=>{n?n.err?this.toastrService.error(n.msg):this.holdPostbackList=this.holdPostbackList.filter(u=>u._id!=e):this.toastrService.error("Not Found")},n=>this.toastrService.error(n.msg))})}addPostback(){this.userData.pid?this.router.navigate(["/postback/add/",this.userData.pid]):this.toastrService.error("Not authorized user!")}static#t=this.\u0275fac=function(o){return new(o||s)(t.rXU(h.k),t.rXU(g),t.rXU(m.Ix),t.rXU(v.tw),t.rXU(H.Bq))};static#e=this.\u0275cmp=t.VBU({type:s,selectors:[["app-postback-list"]],standalone:!0,features:[t.aNF],decls:6,vars:3,consts:[["deleteModal",""],[1,"card"],["class","d-flex flex-row-reverse m-2",4,"ngIf"],["class","card table-responsive m-0",4,"ngIf"],[1,"d-flex","flex-row-reverse","m-2"],["type","button",1,"btn","btn-primary",3,"click"],[1,"card","table-responsive","m-0"],[1,"card-header"],[1,"m-0"],[1,"card-body","table-responsive-sm","p-0"],[1,"table","table-hover"],[4,"ngxPermissionsOnly"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"btn","btn-primary",3,"routerLink","queryParams"],[1,"fa","fa-edit"],[1,"card-body","table-responsive","p-0"],["class","btn btn-primary",3,"routerLink","queryParams",4,"ngxPermissionsOnly"],[1,"btn","btn-danger","ms-1",3,"click"],[1,"fa","fa-trash"],[1,"modal-header"],["id","modal-basic-title",1,"modal-title"],[1,"modal-body"],[1,"col-md-12"],[1,"p-0","m-0"],[1,"text-danger"],[1,"col-md-12","mt-1"],["type","text",1,"form-control",3,"ngModelChange","ngModel"],[1,"modal-footer"],["type","button","class","btn btn-danger",3,"click",4,"ngIf"],["type","button",1,"btn","btn-info",3,"click"],["type","button",1,"btn","btn-danger",3,"click"]],template:function(o,r){1&o&&(t.j41(0,"div",1),t.DNE(1,w,3,0,"div",2)(2,Z,17,3,"div",3)(3,st,18,1,"div",3),t.k0s(),t.DNE(4,rt,19,2,"ng-template",null,0,t.C5r)),2&o&&(t.R7$(),t.Y8G("ngIf",!r.postbackList.length),t.R7$(),t.Y8G("ngIf",r.postbackList.length),t.R7$(),t.Y8G("ngIf",r.holdPostbackList.length))},dependencies:[d.MD,d.Sq,d.bT,m.iI,m.Wk,C.Ai,c.YN,c.me,c.BC,c.vS,C.iB,F.Ov,F.f6],styles:[".table-wrapper[_ngcontent-%COMP%]{background-color:#fff}table[_ngcontent-%COMP%]{table-layout:fixed}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:13px;word-wrap:break-word}.table-wrapper[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;padding:0}a[_ngcontent-%COMP%]:hover{color:#fff!important}"]})}return s})(),data:{title:"All Postback",url:[{title:"Dashboard",url:"/"},{title:"All Postback"}]}}]}]}}]);